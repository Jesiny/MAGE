{% extends "MAGE/base.html" %}
{% block pagetitle %}{{envt.name}}{% endblock %}
{% block maintitle %}Environnement {{envt.name}}{% endblock %}

{% block content %}
{% regroup envt.component_instances.all by model_id as compotype_list %}


<div class='column'>
	<div class='t2'>Généralités</div>
	<div class=metSquare style='width: auto; height: auto; background: #AD103C'>
		<table>
			<tr><td>Nom de code</td><td>: {{envt.name}}</td></tr>
			<tr><td>Responsable</td><td>: {{envt.manager}}</td></tr>
			<tr><td>Référencé le</td><td>: {{envt.buildDate}}</td></tr>
			<tr><td>Sera détruit le</td><td>: {{envt.destructionDate}}</td></tr>
		<tr><td>Catégorie</td><td>: {{envt.typology.name}}</td></tr>
	</table>	
	</div>
</div>


<div class='column'>
	<div class='t2'>Composants</div>	
	{% for compotype in compotype_list %}
		{% for compo in compotype.list %}
			{% cycle '#004A00' '#61292B' '#180052' '#AD103C' '#004D60' '#1B58B8' '#DE4AAD' as moderncolors silent %}
			<div class=metSquare style='width: auto; height: auto; background: {{moderncolors}};'>
				<table>
					<tr><td>Type</td><td>{{compo.instanciates.name}}</td></tr>
					<tr><td>Nom </td><td>{{compo.name}}</td></tr>
					{% if compo.leaf.detail_template %}
						{% include compo.leaf.detail_template  with compo=compo.leaf %}
					{% endif %}
				</table>	
			</div>
		{% endfor %}
	{% endfor %}
</div>


<div class='column' style='width=auto;'>
	<div class='t2'>Représentation</div>
	<img src="{% url 'gph:envt' envt.id %}" alt="environment picture"> 
</div>
{% endblock content %}


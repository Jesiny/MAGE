{% extends "base.html" %}
{% load staticfiles %}

{% block pagetitle %}GE{% endblock %}
{% block maintitle %}Marsupilamographe{% endblock %}
{% block scripts %}
<script type="text/javascript" src='{% static "d3.min.js" %}'></script>
<script type="text/javascript" src='{% static "dagre-d3.min.js" %}'></script>
<script type="text/javascript" src='{% static "jquery-1.9.1.js" %}'></script>
<script type="text/javascript">
$(document).ready(function()
{
	g = new dagreD3.Digraph();
	
	$.ajax(
	{
		url : '{% url "ref:cartodata" %}',
		type : "GET",
		dataType : "json"
	}).done(function(json)
	{
		digraph = dagreD3.json.decode(json['nodes'], json['edges']);
		
		var renderer = new dagreD3.Renderer();
		renderer.run(digraph, d3.select("svg g"));
	});
	//dagreD3.json.decode
});
</script>
<style>
svg {
    overflow: hidden;
}

.node rect {
    stroke: #333;
    stroke-width: 1.5px;
    fill: #fff;
}

.edgeLabel rect {
    fill: #fff;
}

.edgePath {
    stroke: #333;
    stroke-width: 1.5px;
    fill: none;
}
</style>
{% endblock scripts %}

{% block content %}

<div class='metContainer' style='width: auto;'>
	<svg width=5024 height=5024>
	    <g transform="translate(20,20) scale(0.7)"/>
	</svg>
		
</div>
{% endblock content %}
